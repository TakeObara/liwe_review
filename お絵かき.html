<!DOCTYPE html>
<html>
<meta charset="utf-8">
<title>お絵かき</title>
<style type="text/css">
    .button{
        display: inline-block;
    }
</style>
<body>
    <canvas id="canvas" width="500" height="500"></canvas>
    <br/>
    <input type="button" class="button" id="btnRed" value="red" />
    <input type="button" class="button" id="btnBlack" value="black" />
    <input type="button" class="button" id="btnBlue" value="blue" />
    <input type="button" class="button" id="btnClear" value="clear" />
<script type="text/javascript">
    //変数定義---------------------------------------------------
    //ブラシの状態を保存
    var Blush=false;
    //canvasの定義
    var element=document.getElementById("canvas");
    var ctx=element.getContext('2d');
    //マウスの座標(終点)
    var mouseX,mouseY;
    //マウスの座標（始点）
    var x,y;
    //buttonの要素を取得
    var elementRed=document.getElementById("btnRed");
    var elementBlack=document.getElementById("btnBlack");
    var elementBlue=document.getElementById("btnBlue");
    var elementClear=document.getElementById("btnClear");
    //----------------------------------------------------------

    //関数定義---------------------------------------------------------
    //マウスがクリック時に移動した時の関数---------------------------------
    element.addEventListener("mousemove",function(event){
        //現在位置をマウスの終点座標に代入
        mouseX=event.pageX;
        mouseY=event.pageY;
        if(Blush){//クリックされていたら
            //canvasに線を書く
            ctx.beginPath();
            ctx.moveTo(x,y);
            ctx.lineTo(mouseX,mouseY);
            ctx.stroke();
        }
        //現在位置をマウスの始点座標に代入
        x=mouseX;
        y=mouseY;
    });
    //------------------------------------------------------------

    //クリックされていたらBlushをtrueにする----------------------------------
    document.addEventListener("mousedown",function(){
        Blush=true;
    });
    //-------------------------------------------------------------

    //クリックされていなかったらBlushをfalseにする------------------------------
    document.addEventListener("mouseup",function(){
        Blush=false;
    });
    //--------------------------------------------------------------

    //redボタンが押された時の処理------------------------------------------
    elementRed.addEventListener("click",function(){
          ctx.strokeStyle = 'rgb(255, 0, 0)'; // 赤
    });
    //--------------------------------------------------------------

    //blackボタンが押された時の処理----------------------------------------
    elementBlack.addEventListener("click",function(){
        ctx.strokeStyle = 'rgb(0, 0, 0)'; // 黒
    });
    //---------------------------------------------------------------

    //blueボタンが押された時の処理-----------------------------------------
    elementBlue.addEventListener("click",function(){
        ctx.strokeStyle = 'rgb(0, 0, 255)'; // 青
    });
    //---------------------------------------------------------------

    //clearボタンが押された時の処理----------------------------------------
    elementClear.addEventListener("click",function(){
        ctx.clearRect(0, 0, 500, 500);
    });
    //---------------------------------------------------------------

    //---------------------------------------------------------------------
</script>
</body>